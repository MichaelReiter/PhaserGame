// Generated by CoffeeScript 1.10.0
var GameResolution, PlayerVariables, bullets, create, game, keyboard, main, platforms, player, preload, score, scoreText, spacebar, stars, update;

GameResolution = {
  width: 800,
  height: 600
};

PlayerVariables = {
  movementSpeed: 150,
  jumpSpeed: 300,
  bulletSpeed: 300,
  playerScale: 1,
  facing: "right",
  fireRate: 3,
  lastFired: 0
};

game = null;

platforms = null;

player = null;

keyboard = null;

spacebar = null;

stars = null;

bullets = null;

score = 0;

scoreText = null;

main = function() {
  return game = new Phaser.Game(GameResolution.width, GameResolution.height, Phaser.AUTO, '', {
    preload: preload,
    create: create,
    update: update
  });
};

preload = function() {
  game.load.image('background', 'img/sky.png');
  game.load.image('platform', 'img/platform.png');
  game.load.image('star', 'img/star.png');
  game.load.image('bullet', 'img/bullet.png');
  game.load.spritesheet('player', 'img/player.png', 39, 34);
};

create = function() {
  var i, j, star;
  game.physics.startSystem(Phaser.Physics.ARCADE);
  levelInit();
  playerInit();
  bullets = game.add.group();
  bullets.enableBody = true;
  stars = game.add.group();
  stars.enableBody = true;
  for (i = j = 1; j <= 12; i = ++j) {
    star = stars.create(i * 70, 0, 'star');
    star.body.gravity.y = 300;
  }
  scoreText = game.add.text(16, 16, 'Score: 0', {
    fontSize: '32px',
    fill: '#fff'
  });
  keyboard = game.input.keyboard.createCursorKeys();
  spacebar = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
};

update = function() {
  game.physics.arcade.collide(player, platforms);
  game.physics.arcade.collide(stars, platforms);
  game.physics.arcade.overlap(player, stars, collectStar, null, this);
  playerMovement();
};
